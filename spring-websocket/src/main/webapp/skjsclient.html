<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="http://cdn.bootcss.com/sockjs-client/1.1.1/sockjs.min.js"></script>
</head>
<body>
	<script type="text/javascript">
		var url = 'http://' + window.location.host + '/websocket/marco';
		var sock = new SockJS(url);

		sock.onopen = function() {
			console.log('Opening');
			sayMarco();
		}

		sock.onmessage = function(e) {
			console.log('Received message: ', e.data);
			setTimeout(function() {
				sayMarco()
			}, 2000);
		}

		function sayMarco() {
			console.log('Sending Marco!');
			sock.send('Marco!')
		}
	</script>
</body>
</html>